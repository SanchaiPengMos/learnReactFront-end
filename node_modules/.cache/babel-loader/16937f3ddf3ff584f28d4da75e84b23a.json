{"ast":null,"code":"var _jsxFileName = \"/Users/jirapong/projecthotel/member/src/components/FormLogin/Login.js\";\n\n/* eslint-disable jsx-a11y/anchor-is-valid */\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { BrowserRouter as Router, Link, Route, Switch } from 'react-router-dom';\nimport Reg from '../Register/Reg';\nimport './InputLogin.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst api = 'http://localhost:9999/login'; // const api2 = 'https://ufa365xr.com/apiweb/api.php'\n\nconst apiuser = 'http://localhost:9999/user';\nexport default class InputLogin extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleLogin = e => {\n      this.setState({\n        isLoggedIn: true\n      });\n      e.preventDefault();\n      const con = {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        }\n      };\n      const data = {\n        email: this.email,\n        password: this.password,\n        usepermis_id: this.usepermis_id\n      };\n      axios.post(api, data, con).then(function (res) {\n        console.log(res);\n        localStorage.setItem('token', res.data.token);\n        console.log(res.data.token);\n        console.log(res.data.type);\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.handleLoginClick = this.handleLogin.bind(this);\n    this.handleLogoutClick = this.handleLogoutClick.bind(this);\n    this.state = {\n      isLoggedIn: false\n    };\n  }\n\n  handleLogoutClick() {\n    this.setState({\n      isLoggedIn: false\n    });\n  }\n\n  componentDidMount() {\n    const config = {\n      Headers: {\n        Authorization: 'Bearer' + localStorage.getItem('token')\n      }\n    };\n    console.log(\"==componentDidMount==\");\n    axios.get(apiuser, config).then(res => {\n      console.log(res);\n      this.setState({\n        user: res.data\n      });\n      console.log(res.data);\n    }, err => {\n      console.log(err);\n    });\n  }\n\n  render() {\n    const isLoggedIn = this.state.isLoggedIn;\n    let button;\n\n    if (isLoggedIn) {\n      button = /*#__PURE__*/_jsxDEV(LogoutButton, {\n        onClick: this.handleLogoutClick\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 22\n      }, this);\n    } else {\n      button = /*#__PURE__*/_jsxDEV(LoginButton, {\n        onClick: this.handleLogin\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 22\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(Router, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col\",\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: this.handleLogin,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Email\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"email\",\n                name: \"email\",\n                onChange: e => this.email = e.target.value,\n                className: \"form-control\",\n                placeholder: \"Email\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"password\",\n                name: \"password\",\n                onChange: e => this.password = e.target.value,\n                className: \"form-control\",\n                placeholder: \"Password\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 29\n              }, this), button]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Greeting, {\n              isLoggedIn: isLoggedIn\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nfunction Login(props) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"text\",\n      children: \"\\u0E08\\u0E2D\\u0E07\\u0E17\\u0E35\\u0E48\\u0E1E\\u0E31\\u0E01\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 14\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 156,\n    columnNumber: 9\n  }, this);\n}\n\n_c = Login;\n\nfunction GustGreeting() {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Link, {\n      to: '/Register/Reg',\n      className: \"nav-link\",\n      children: \" \\u0E2A\\u0E21\\u0E31\\u0E04\\u0E23\\u0E2A\\u0E21\\u0E32\\u0E0A\\u0E34\\u0E01 \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Switch, {\n      children: /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/Register/Reg\",\n        component: Reg\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 29\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 25\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 164,\n    columnNumber: 12\n  }, this);\n}\n\n_c2 = GustGreeting;\n\nfunction Greeting(props) {\n  const isLoggedIn = props.isLoggedIn;\n\n  if (isLoggedIn) {\n    return /*#__PURE__*/_jsxDEV(Login, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 16\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(GustGreeting, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 16\n    }, this);\n  }\n}\n\n_c3 = Greeting;\n\nfunction LoginButton(props) {\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    className: \"Login\",\n    onClick: props.onClick,\n    children: \"Login\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 186,\n    columnNumber: 9\n  }, this);\n}\n\n_c4 = LoginButton;\n\nfunction LogoutButton(props) {\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    className: \"Logout\",\n    onClick: props.onClick,\n    children: \"Logout\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 194,\n    columnNumber: 9\n  }, this);\n}\n\n_c5 = LogoutButton;\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"Login\");\n$RefreshReg$(_c2, \"GustGreeting\");\n$RefreshReg$(_c3, \"Greeting\");\n$RefreshReg$(_c4, \"LoginButton\");\n$RefreshReg$(_c5, \"LogoutButton\");","map":{"version":3,"sources":["/Users/jirapong/projecthotel/member/src/components/FormLogin/Login.js"],"names":["React","Component","axios","BrowserRouter","Router","Link","Route","Switch","Reg","api","apiuser","InputLogin","constructor","props","handleLogin","e","setState","isLoggedIn","preventDefault","con","method","headers","data","email","password","usepermis_id","post","then","res","console","log","localStorage","setItem","token","type","catch","err","handleLoginClick","bind","handleLogoutClick","state","componentDidMount","config","Headers","Authorization","getItem","get","user","render","button","target","value","Login","GustGreeting","Greeting","LoginButton","onClick","LogoutButton"],"mappings":"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","sourcesContent":["/* eslint-disable jsx-a11y/anchor-is-valid */\nimport React, { Component } from 'react'\nimport axios from 'axios'\nimport { BrowserRouter as Router,Link, Route, Switch } from 'react-router-dom'\nimport Reg from '../Register/Reg'\nimport './InputLogin.css'\n\n const api = 'http://localhost:9999/login'\n// const api2 = 'https://ufa365xr.com/apiweb/api.php'\nconst apiuser = 'http://localhost:9999/user'\n\n\nexport default class InputLogin extends Component {\n\n\n    constructor(props){\n        super(props);\n\n        this.handleLoginClick = this.handleLogin.bind(this);\n        this.handleLogoutClick = this.handleLogoutClick.bind(this);\n\n\n        this.state = {\n            isLoggedIn : false\n        }\n    }\n    \n\n      handleLogin = e => {\n\n        this.setState ({\n            isLoggedIn: true\n        })\n\n          e.preventDefault();\n\n        const con = {\n            method: 'post',\n            headers: {\n              'Content-Type': 'application/x-www-form-urlencoded',\n            }}\n\n        const data  = {\n              email : this.email,\n              password: this.password,\n              usepermis_id : this.usepermis_id,\n          };\n\n        axios.post(api,data,con  )\n        .then(function(res) {\n            console.log(res);\n\n            localStorage.setItem('token',res.data.token)\n\n            console.log(res.data.token)\n            console.log(res.data.type)\n        \n            \n          })\n\n        .catch(err => {\n            console.log(err)\n        })\n      };\n\n      handleLogoutClick() {\n        this.setState ({\n            isLoggedIn: false\n        })\n    }\n\n    componentDidMount() {\n\n        const config = {\n          Headers: {\n            Authorization : 'Bearer' + localStorage.getItem('token')\n          }\n        }\n    \n        console.log(\"==componentDidMount==\")\n    \n        axios.get(apiuser,config)\n          \n          .then(\n          res => {\n            console.log(res)\n            this.setState({\n              user: res.data\n            })\n            console.log(res.data)\n          },\n          err => {\n            console.log(err)\n          }\n        )\n        \n      }\n\n\n    render() {\n\n        const isLoggedIn = this.state.isLoggedIn;\n        let button;\n\n        if (isLoggedIn) {\n            button = <LogoutButton onClick={this.handleLogoutClick}/>\n        } else {\n            button = <LoginButton onClick={this.handleLogin}/>\n\n        }\n\n        return (\n            \n            <Router>\n            <div className=\"row\">\n                    \n                    <div className=\"col\">\n                    \n                    <form onSubmit={this.handleLogin} >\n\n                        <div className=\"form-group\">\n                            <label >Email</label>\n                            <input\n                            type=\"email\"\n                            name=\"email\"\n                            onChange={e => this.email = e.target.value} \n                            className=\"form-control\" \n                            placeholder=\"Email\"\n                            required />\n\n                            <label>Password</label>\n                            <input \n                            type=\"password\"\n                            name=\"password\"\n                            onChange={e => this.password = e.target.value} \n                            className=\"form-control\" \n                            placeholder=\"Password\"\n                            required />\n                            {button}\n                            \n                        \n                        </div>\n                        <Greeting isLoggedIn={isLoggedIn}/>\n                    \n                    </form>\n                    </div>\n                    \n            </div>\n            </Router>\n\n        )\n    }\n}\nfunction Login(props) {\n    return (\n        <div >\n             <button type=\"text\" >จองที่พัก</button>\n        </div>\n    )\n    \n}\n\nfunction GustGreeting() {\n    return <div>\n\n        <Link to={'/Register/Reg'} className=\"nav-link\"> สมัครสมาชิก </Link>\n                        <Switch>\n                            <Route path='/Register/Reg' component={Reg} />\n                        </Switch>\n    </div>\n}\n\nfunction Greeting(props) {\n    const isLoggedIn = props.isLoggedIn;\n\n    if(isLoggedIn) {\n        return <Login />\n    } else {\n        return <GustGreeting />\n    }\n}\n\nfunction  LoginButton(props) {\n    return (\n        \n        <button className=\"Login\" onClick={props.onClick}>\n            Login\n        </button>\n    )\n}\n\nfunction  LogoutButton(props) {\n    return (\n        <button className=\"Logout\" onClick={props.onClick}>\n            Logout\n        </button>\n    )\n}"]},"metadata":{},"sourceType":"module"}